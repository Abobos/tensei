# Plugins

[[toc]]

## Overview

Sometimes, your business may need additional functionality that isn't provided by Nova. For this reason, Nova allows you to build custom plugins and add them to the Nova sidebar. Nova plugins are incredibly customizable, as they primarily consist of a single-file Vue component that is totally under your control. Within your Vue component, you are free to make HTTP requests to any controller within your application.

## Defining Plugins

Custom plugins may be generated using the `nova:plugin` Artisan command. By default, all new plugins will be placed in the `nova-components` directory of your application. When generating a plugin using the `nova:plugin` command, the plugin name you pass to the command should follow the Composer `vendor/package` format. So, if we were building a price tracker plugin, we might run the following command:

```bash
php artisan nova:plugin acme/price-tracker
```

When generating a plugin, Nova will prompt you to install the plugin's NPM dependencies, compile its assets, and update your application's `composer.json` file. All custom plugins are registered with your application as a Composer "path" repository.

Nova plugins include all of the scaffolding necessary to build your plugin. Each plugin even contains its own `composer.json` file and is ready to be shared with the world on GitHub or the source control provider of your choice.

## Registering Plugins

Nova plugins may be registered in your application's `NovaServiceProvider`. Your service provider contains a `plugins` method, which returns an array of plugins. To register your plugin, simply add it to the list of plugins returned by this method. For example, if you created a Nova plugin named `acme/price-tracker`, you may register the plugin like so:

```php
use Acme\PriceTracker\PriceTracker;

/**
 * Get the cards that should be listed in the Nova sidebar.
 *
 * @return array
 */
public function plugins()
{
    return [
        new PriceTracker,
    ];
}
```

## Building Plugins

Each plugin generated by Nova includes its own service provider and "plugin" class. Using the `price-tracker` plugin as an example, the plugin class will be located at `src/PriceTracker.php`. The plugin class must be registered with your application's `NovaServiceProvider` as previously noted.

The plugin's service provider is also located within the `src` directory of the plugin, and is registered in your plugin's `composer.json` file so that it will be auto-loaded by the Laravel framework.

### Authorization

If you would like to only expose a given plugin to certain users, you may chain the `canSee` method onto your plugin's registration. The `canSee` method accepts a Closure which should return `true` or `false`. The Closure will receive the incoming HTTP request:

```php
use Acme\PriceTracker\PriceTracker;

/**
 * Get the plugins that should be listed in the Nova sidebar.
 *
 * @return array
 */
public function plugins()
{
    return [
        (new PriceTracker)->canSee(function ($request) {
            return false;
        }),
    ];
}
```

### Routing

Often, you will need to define Laravel routes that are called by your plugin. When Nova generates your plugin, it creates a `routes/api.php` routes file. If needed, you may use this file to define any routes your plugin requires.

All routes within this file are automatically defined inside a route group by your plugin's `PluginServiceProvider`. The route group specifies that all routes within the group should receive a `/nova-vendor/plugin-name` prefix, where `plugin-name` is the "kebab-case" name of your plugin. So, for example, `/nova-vendor/price-tracker`. You are free to modify this route group definition, but take care to make sure your Nova plugin will co-exist with other Nova packages.

#### Routing Authorization

Your Nova plugin is generated with an `Authorize` middleware. This middleware automatically determines that the authenticated user can "see" the plugin before it processes any requests to routes within your plugin's route group; however, you are free to modify this middleware if needed.

### Navigation

Your Nova plugin class contains a `renderNavigation` method. This method should return the view that renders your plugin's sidebar links. A default navigation view will be created for you when the plugin is generated; however, you are free to customize this view as needed:

```php
/**
 * Build the view that renders the navigation links for the plugin.
 *
 * @return \Illuminate\View\View
 */
public function renderNavigation()
{
    return view('price-tracker::navigation');
}
```

### Assets

When Nova generates your plugin, `resources/js` and `resources/sass` directories are generated for you. These directories contain your plugin's JavaScript and Sass stylesheets. The primary files of interest in these directories are: `resources/js/components/Plugin.vue` and `resources/sass/plugin.scss`.

The `Plugin.vue` file is a single-file Vue component that contains your plugin's front-end. From this file, you are free to build your plugin however you want. Your plugin can make HTTP requests using Axios, which is available globally. In addition, the `moment.js` and `underscore.js` libraries are globally available.

#### Registering Assets

Your Nova plugin class contains a `boot` method. This method is executed when the plugin is registered and available. By default, this method registers your plugin's compiled assets so that they will be available to the Nova front-end:

```php
/**
 * Perform any tasks that need to happen on plugin registration.
 *
 * @return void
 */
public function boot()
{
    Nova::script('price-tracker', __DIR__.'/../dist/js/plugin.js');
    Nova::style('price-tracker', __DIR__.'/../dist/css/plugin.css');
}
```

:::tip JavaScript Bootstrap & Routing

Your component is bootstrapped and front-end routes are registered in the `resources/js/plugin.js` file. You are free to modify this file or register additional components here as needed.
:::

#### Compiling Assets

Your Nova plugin contains a `webpack.mix.js` file, which is generated when Nova creates your plugin. You may build your plugin using the NPM `dev` and `prod` commands:

```bash
// Compile your assets for local development...
npm run dev

// Compile and minify your assets...
npm run prod
```

In addition, you may run the NPM `watch` command to auto-compile your assets when they are changed:

```bash
npm run watch
```

### Sidebar Icons

Nova utilizes the free icon set [Heroicons UI](https://github.com/sschoger/heroicons-ui) from designer [Steve Schoger](https://twitter.com/steveschoger). Feel free to use these icons to match the look and feel of Nova's built-in ones.
